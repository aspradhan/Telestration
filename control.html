<html>
<head>
<script src="js/jquery.min.js"></script>
<script src="js/fabric.min.js"></script>
<script src="config.js"></script>
<script>
	URL = URL + "control";
</script>
<script src="js/sockets.js"></script>
<script src="js/viewscreen.js"></script>
<script>
$(document).ready( function() {
	canvas = this.__canvas = new fabric.StaticCanvas('c');
	resizeCanvas();
	$("#canvas-contain").css({"max-height":(960*(CANVAS_WIDTH/CANVAS_HEIGHT))});

	socket = openSocket(URL);

	$("#clear-canvas").click( function() {
		canvas.clear();
		socket.send('{"objects":[],"background":""}');
	});
	$("#on-air").click( function() {
		socket.send('UP');
	});
	$("#off-air").click( function() {
		socket.send('DOWN');
	});
});

var key_down = false;
$(document).keydown( function(event) {
	if (event.keyCode == 32) {	// spacebar for up/down control
		event.preventDefault();
		if (!key_down) {
			if (on_air) {
				socket.send('DOWN');
			} else {
				socket.send('UP');
			}
		}
		key_down = true;
	}
});
$(document).keyup( function(event) {
	if (event.keyCode == 32) {
		key_down = false;
	}
});
</script>
<link rel="stylesheet" href="css/ui.css">
</head>
	<body>
		<div id="main">
			<div id="canvas-contain" style="max-width:960;">
				<div id="indicator"></div>
				<canvas id="c" class="lower-canvas"></canvas>
			</div>

			<div style="display: inline-block; margin-left: 10px">
				<br>
				<button id="clear-canvas" class="btn btn-info">Clear</button><br>
				<br>
				<button id="on-air">On Air</button>
				<button id="off-air">Off Air</button>
			</div>
		</div>
	</body>
</html>
