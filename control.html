<html>
<head>
<script>
	const URL = "ws://localhost:12180/control";
	const CANVAS_W = 1920;
</script>
<script src="js/jquery.min.js"></script>
<script src="js/fabric.min.js"></script>
<script src="js/sockets.js"></script>
<script src="js/viewscreen.js"></script>
<script>
$(document).ready( function() {
	canvas = this.__canvas = new fabric.StaticCanvas('c');
	resizeCanvas();

	socket = openSocket(URL);

	$("#clear-canvas").click( function() {
		canvas.clear();
		socket.send('{"objects":[],"background":""}');
	});
	$("#on-air").click( function() {
		socket.send('UP');
	});
	$("#off-air").click( function() {
		socket.send('DOWN');
	});
});

$(document).keydown( function(event) {
	if (event.keyCode == 32) {	// spacebar for up/down control
		event.preventDefault();
		if (on_air) {
			socket.send('DOWN');
		} else {
			socket.send('UP');
		}
	}
});
</script>
<link rel="stylesheet" href="css/ui.css">
</head>
	<body>
		<div id="main">
			<div id="canvas-contain" style="max-width:960; max-height: 540px;">
				<div id="indicator"></div>
				<canvas id="c" width="1600" height="900" class="lower-canvas"></canvas>
			</div>

			<div style="display: inline-block; margin-left: 10px">
				<br>
				<button id="clear-canvas" class="btn btn-info">Clear</button><br>
				<br>
				<button id="on-air">On Air</button>
				<button id="off-air">Off Air</button>
			</div>
		</div>
	</body>
</html>